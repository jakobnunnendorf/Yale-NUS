# YSC2239 Midterm Spring 2023

### This exam consists of 3 questions.

### Time: March 2nd 7:05pm - 8:25pm (No submission will be accepted after the deadline)

### Venue: Science Centre Classroom 17 at Yale-NUS College

## Table of Contents

### [1. Tennis serving strategy (40 points)](#q1)

### [2. Testing hypotheses (40 points)](#q2)

### [3. Housing price vs fertility rate (20 points)](#q3)

For all problems that you must write explanations and sentences for, you
must provide your answer in the designated space. Moreover, please be
sure to not re-assign variables throughout the notebook! For example, if
you use max_value in your answer to one question, do not reassign it
later on. Otherwise, you may fail the test!

``` python
# Run this cell, but please don't change it.

# These lines import the Numpy and Datascience modules.
import numpy as np
import random
from datascience import *

# These lines do some fancy plotting magic.
import matplotlib
%matplotlib inline
import matplotlib.pyplot as plots
plots.style.use('fivethirtyeight')
import warnings
warnings.simplefilter('ignore', FutureWarning)
```

### 1. Tennis serving strategy (40 points) `<a id='q1'>`{=html}`</a>`{=html}

Data, analytics, and machine learning have become ubiquitous around
sports over the past decade or so. One of the values of sports analytics
is in opposition scouting, for example what an optimal strategy might
look like. Today we are going to analyse the serving stragegy in tennis
sport (Please refer to the
[link](https://www.keithprowse.co.uk/news-and-blog/2019/01/02/tennis-terminology-explained/)
on Essential terminology of tennis sport).

In tennis, the player serving the ball has an advantage because they are
able to start the **point** --- giving them strategic choices like where
to place the ball and what type of spin to hit with. The serve is also
one of the fastest shots in tennis. Not only that, but the server gets
two chances at their serve in case they miss the first. So first serves
are typically hit with the intent to give the server a strong advantage.
They are powerful and sometimes erratic, but the server can take some
risk because there is always a second chance with the second serve. As
second serves have no such safety net, they are by and large delivered
with more caution.

Most players, amateur and professional, employ two different serves:
players typically use their first serve to play a ball faster and into
tighter, more advantageous windows, such as out wide or down the center
of the "T," where the service boxes meet. The point is to gain an
advantage by forcing a weak return, pushing the opponent into an
undesirable court position, or winning the point uncontested through an
**ace**. The second serve, then, is typically played more safely.
Players tend to use play a slower ball into windows with a higher margin
for error. The player will still attempt to gain an advantage by
controlling the opponent's court position, but the advantage tends to be
smaller than on a successful first serve.

The strategy for players comes down to maximizing their chance of
winning a point on serve. Let's call this `p_Won`. To get the explicit
formula we need a few more quantities:

`p_1stIn` : the probability of first serve landing it in,

`p_1stWon`: the probability of winning on first serve given that it
lands in.

Similarly, `p_2ndIn` and `p_2ndWon` be the corresponding probabilities
on the second serve. Note by assigning an initial random value to these
names, we are just declaring these variables in Python. The values of
these variables can be updated.

``` python
# Don't change this cell; just run it
p_1stIn = random.random()
p_1stWon = random.random()
p_2ndIn = random.random()
p_2ndWon = random.random()
```

Question 1.1 What is a player's winning probability `p_Won` when
serving? (5 points)

``` python
#Answer_to_Question 1.1 
p_Won = ...
p_Won
```

Question 1.2 Here is the average statistics on Top 50 men's player. They
win 73.6 percent of service points when the first serve lands in,
compared to 57.5 percent when the second serve lands in. But first serve
lands in just 61.9 percent of the time, compared to 91.1 percent of
second serves. So what is the winning probability for the average player
(denoted by `p_ave_Won`)? Show your calculation formula (5 points)

``` python
#Answer_to_Question 1.2
p_ave_Won = ...
p_ave_Won
```

Question 1.3 Even for great players, risk control isn't always easy.
Sometimes the control of the second serve can get so out of whack that
they are better off sticking with their first serve. So two-first-serve
strategy is an alternative option in tennis. What is a player's winning
probability when serving using two-first-serve strategy (denoted by
`p_Won_alt`)? (5 points)

``` python
#Answer_to_Question 1.3
p_Won_alt = ...
p_Won_alt
```

Question 1.4 We can make a rational decision regarding the two serving
strategies (i.e common one and the alternative two-first-serve strategy)
based upon the calculation of the corresponding winning probabilities.
Please help provide one example where two-first-serve is more preferable
than the common strategy. (5 points)

``` python
#Answer_to_Question 1.4
...
```

There is a Github repository containing excellent data on ATP matches
over the timeframe. One CSV file regarding ATP Matches in 2022 is
downloaded from the Github.

``` python
# Don't change this cell; just run it
atp = Table.read_table("atp_2022.csv")
atp.show(5)
```

```{=html}
<table border="1" class="dataframe">
```
```{=html}
<thead>
```
```{=html}
<tr>
```
```{=html}
<th>
```
tourney_id
```{=html}
</th>
```
```{=html}
<th>
```
tourney_name
```{=html}
</th>
```
```{=html}
<th>
```
surface
```{=html}
</th>
```
```{=html}
<th>
```
draw_size
```{=html}
</th>
```
```{=html}
<th>
```
tourney_level
```{=html}
</th>
```
```{=html}
<th>
```
tourney_date
```{=html}
</th>
```
```{=html}
<th>
```
match_num
```{=html}
</th>
```
```{=html}
<th>
```
winner_id
```{=html}
</th>
```
```{=html}
<th>
```
winner_seed
```{=html}
</th>
```
```{=html}
<th>
```
winner_entry
```{=html}
</th>
```
```{=html}
<th>
```
winner_name
```{=html}
</th>
```
```{=html}
<th>
```
winner_hand
```{=html}
</th>
```
```{=html}
<th>
```
winner_ht
```{=html}
</th>
```
```{=html}
<th>
```
winner_ioc
```{=html}
</th>
```
```{=html}
<th>
```
winner_age
```{=html}
</th>
```
```{=html}
<th>
```
loser_id
```{=html}
</th>
```
```{=html}
<th>
```
loser_seed
```{=html}
</th>
```
```{=html}
<th>
```
loser_entry
```{=html}
</th>
```
```{=html}
<th>
```
loser_name
```{=html}
</th>
```
```{=html}
<th>
```
loser_hand
```{=html}
</th>
```
```{=html}
<th>
```
loser_ht
```{=html}
</th>
```
```{=html}
<th>
```
loser_ioc
```{=html}
</th>
```
```{=html}
<th>
```
loser_age
```{=html}
</th>
```
```{=html}
<th>
```
score
```{=html}
</th>
```
```{=html}
<th>
```
best_of
```{=html}
</th>
```
```{=html}
<th>
```
round
```{=html}
</th>
```
```{=html}
<th>
```
minutes
```{=html}
</th>
```
```{=html}
<th>
```
w_ace
```{=html}
</th>
```
```{=html}
<th>
```
w_df
```{=html}
</th>
```
```{=html}
<th>
```
w_svpt
```{=html}
</th>
```
```{=html}
<th>
```
w_1stIn
```{=html}
</th>
```
```{=html}
<th>
```
w_1stWon
```{=html}
</th>
```
```{=html}
<th>
```
w_2ndWon
```{=html}
</th>
```
```{=html}
<th>
```
w_SvGms
```{=html}
</th>
```
```{=html}
<th>
```
w_bpSaved
```{=html}
</th>
```
```{=html}
<th>
```
w_bpFaced
```{=html}
</th>
```
```{=html}
<th>
```
l_ace
```{=html}
</th>
```
```{=html}
<th>
```
l_df
```{=html}
</th>
```
```{=html}
<th>
```
l_svpt
```{=html}
</th>
```
```{=html}
<th>
```
l_1stIn
```{=html}
</th>
```
```{=html}
<th>
```
l_1stWon
```{=html}
</th>
```
```{=html}
<th>
```
l_2ndWon
```{=html}
</th>
```
```{=html}
<th>
```
l_SvGms
```{=html}
</th>
```
```{=html}
<th>
```
l_bpSaved
```{=html}
</th>
```
```{=html}
<th>
```
l_bpFaced
```{=html}
</th>
```
```{=html}
<th>
```
winner_rank
```{=html}
</th>
```
```{=html}
<th>
```
winner_rank_points
```{=html}
</th>
```
```{=html}
<th>
```
loser_rank
```{=html}
</th>
```
```{=html}
<th>
```
loser_rank_points
```{=html}
</th>
```
```{=html}
</tr>
```
```{=html}
</thead>
```
```{=html}
<tbody>
```
```{=html}
<tr>
```
```{=html}
<td>
```
2022-8888
```{=html}
</td>
```
```{=html}
<td>
```
Atp Cup
```{=html}
</td>
```
```{=html}
<td>
```
Hard
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
A
```{=html}
</td>
```
```{=html}
<td>
```
20220103
```{=html}
</td>
```
```{=html}
<td>
```
300
```{=html}
</td>
```
```{=html}
<td>
```
200000
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Felix Auger Aliassime
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
193
```{=html}
</td>
```
```{=html}
<td>
```
CAN
```{=html}
</td>
```
```{=html}
<td>
```
21.4
```{=html}
</td>
```
```{=html}
<td>
```
105138
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Roberto Bautista Agut
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
183
```{=html}
</td>
```
```{=html}
<td>
```
ESP
```{=html}
</td>
```
```{=html}
<td>
```
33.7
```{=html}
</td>
```
```{=html}
<td>
```
7-6(3) 6-3
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
F
```{=html}
</td>
```
```{=html}
<td>
```
129
```{=html}
</td>
```
```{=html}
<td>
```
15
```{=html}
</td>
```
```{=html}
<td>
```
6
```{=html}
</td>
```
```{=html}
<td>
```
78
```{=html}
</td>
```
```{=html}
<td>
```
51
```{=html}
</td>
```
```{=html}
<td>
```
38
```{=html}
</td>
```
```{=html}
<td>
```
14
```{=html}
</td>
```
```{=html}
<td>
```
11
```{=html}
</td>
```
```{=html}
<td>
```
10
```{=html}
</td>
```
```{=html}
<td>
```
11
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
2
```{=html}
</td>
```
```{=html}
<td>
```
70
```{=html}
</td>
```
```{=html}
<td>
```
50
```{=html}
</td>
```
```{=html}
<td>
```
32
```{=html}
</td>
```
```{=html}
<td>
```
7
```{=html}
</td>
```
```{=html}
<td>
```
10
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
5
```{=html}
</td>
```
```{=html}
<td>
```
11
```{=html}
</td>
```
```{=html}
<td>
```
3308
```{=html}
</td>
```
```{=html}
<td>
```
19
```{=html}
</td>
```
```{=html}
<td>
```
2260
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
2022-8888
```{=html}
</td>
```
```{=html}
<td>
```
Atp Cup
```{=html}
</td>
```
```{=html}
<td>
```
Hard
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
A
```{=html}
</td>
```
```{=html}
<td>
```
20220103
```{=html}
</td>
```
```{=html}
<td>
```
299
```{=html}
</td>
```
```{=html}
<td>
```
133430
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Denis Shapovalov
```{=html}
</td>
```
```{=html}
<td>
```
L
```{=html}
</td>
```
```{=html}
<td>
```
185
```{=html}
</td>
```
```{=html}
<td>
```
CAN
```{=html}
</td>
```
```{=html}
<td>
```
22.7
```{=html}
</td>
```
```{=html}
<td>
```
105807
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Pablo Carreno Busta
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
188
```{=html}
</td>
```
```{=html}
<td>
```
ESP
```{=html}
</td>
```
```{=html}
<td>
```
30.4
```{=html}
</td>
```
```{=html}
<td>
```
6-4 6-3
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
F
```{=html}
</td>
```
```{=html}
<td>
```
98
```{=html}
</td>
```
```{=html}
<td>
```
7
```{=html}
</td>
```
```{=html}
<td>
```
2
```{=html}
</td>
```
```{=html}
<td>
```
78
```{=html}
</td>
```
```{=html}
<td>
```
49
```{=html}
</td>
```
```{=html}
<td>
```
34
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
10
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
9
```{=html}
</td>
```
```{=html}
<td>
```
1
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
50
```{=html}
</td>
```
```{=html}
<td>
```
33
```{=html}
</td>
```
```{=html}
<td>
```
21
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
9
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
6
```{=html}
</td>
```
```{=html}
<td>
```
14
```{=html}
</td>
```
```{=html}
<td>
```
2475
```{=html}
</td>
```
```{=html}
<td>
```
20
```{=html}
</td>
```
```{=html}
<td>
```
2230
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
2022-8888
```{=html}
</td>
```
```{=html}
<td>
```
Atp Cup
```{=html}
</td>
```
```{=html}
<td>
```
Hard
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
A
```{=html}
</td>
```
```{=html}
<td>
```
20220103
```{=html}
</td>
```
```{=html}
<td>
```
298
```{=html}
</td>
```
```{=html}
<td>
```
105138
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Roberto Bautista Agut
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
183
```{=html}
</td>
```
```{=html}
<td>
```
ESP
```{=html}
</td>
```
```{=html}
<td>
```
33.7
```{=html}
</td>
```
```{=html}
<td>
```
128034
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Hubert Hurkacz
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
196
```{=html}
</td>
```
```{=html}
<td>
```
POL
```{=html}
</td>
```
```{=html}
<td>
```
24.8
```{=html}
</td>
```
```{=html}
<td>
```
7-6(6) 2-6 7-6(5)
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
SF
```{=html}
</td>
```
```{=html}
<td>
```
164
```{=html}
</td>
```
```{=html}
<td>
```
1
```{=html}
</td>
```
```{=html}
<td>
```
2
```{=html}
</td>
```
```{=html}
<td>
```
96
```{=html}
</td>
```
```{=html}
<td>
```
64
```{=html}
</td>
```
```{=html}
<td>
```
50
```{=html}
</td>
```
```{=html}
<td>
```
20
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
1
```{=html}
</td>
```
```{=html}
<td>
```
4
```{=html}
</td>
```
```{=html}
<td>
```
24
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
120
```{=html}
</td>
```
```{=html}
<td>
```
80
```{=html}
</td>
```
```{=html}
<td>
```
62
```{=html}
</td>
```
```{=html}
<td>
```
20
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
6
```{=html}
</td>
```
```{=html}
<td>
```
7
```{=html}
</td>
```
```{=html}
<td>
```
19
```{=html}
</td>
```
```{=html}
<td>
```
2260
```{=html}
</td>
```
```{=html}
<td>
```
9
```{=html}
</td>
```
```{=html}
<td>
```
3706
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
2022-8888
```{=html}
</td>
```
```{=html}
<td>
```
Atp Cup
```{=html}
</td>
```
```{=html}
<td>
```
Hard
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
A
```{=html}
</td>
```
```{=html}
<td>
```
20220103
```{=html}
</td>
```
```{=html}
<td>
```
297
```{=html}
</td>
```
```{=html}
<td>
```
105807
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Pablo Carreno Busta
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
188
```{=html}
</td>
```
```{=html}
<td>
```
ESP
```{=html}
</td>
```
```{=html}
<td>
```
30.4
```{=html}
</td>
```
```{=html}
<td>
```
126591
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Jan Zielinski
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
POL
```{=html}
</td>
```
```{=html}
<td>
```
25.1
```{=html}
</td>
```
```{=html}
<td>
```
6-2 6-1
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
SF
```{=html}
</td>
```
```{=html}
<td>
```
53
```{=html}
</td>
```
```{=html}
<td>
```
6
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
45
```{=html}
</td>
```
```{=html}
<td>
```
33
```{=html}
</td>
```
```{=html}
<td>
```
25
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
2
```{=html}
</td>
```
```{=html}
<td>
```
1
```{=html}
</td>
```
```{=html}
<td>
```
38
```{=html}
</td>
```
```{=html}
<td>
```
27
```{=html}
</td>
```
```{=html}
<td>
```
17
```{=html}
</td>
```
```{=html}
<td>
```
1
```{=html}
</td>
```
```{=html}
<td>
```
7
```{=html}
</td>
```
```{=html}
<td>
```
4
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
20
```{=html}
</td>
```
```{=html}
<td>
```
2230
```{=html}
</td>
```
```{=html}
<td>
```
860
```{=html}
</td>
```
```{=html}
<td>
```
18
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
2022-8888
```{=html}
</td>
```
```{=html}
<td>
```
Atp Cup
```{=html}
</td>
```
```{=html}
<td>
```
Hard
```{=html}
</td>
```
```{=html}
<td>
```
16
```{=html}
</td>
```
```{=html}
<td>
```
A
```{=html}
</td>
```
```{=html}
<td>
```
20220103
```{=html}
</td>
```
```{=html}
<td>
```
296
```{=html}
</td>
```
```{=html}
<td>
```
106421
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Daniil Medvedev
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
198
```{=html}
</td>
```
```{=html}
<td>
```
RUS
```{=html}
</td>
```
```{=html}
<td>
```
25.8
```{=html}
</td>
```
```{=html}
<td>
```
200000
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
nan
```{=html}
</td>
```
```{=html}
<td>
```
Felix Auger Aliassime
```{=html}
</td>
```
```{=html}
<td>
```
R
```{=html}
</td>
```
```{=html}
<td>
```
193
```{=html}
</td>
```
```{=html}
<td>
```
CAN
```{=html}
</td>
```
```{=html}
<td>
```
21.4
```{=html}
</td>
```
```{=html}
<td>
```
6-4 6-0
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
SF
```{=html}
</td>
```
```{=html}
<td>
```
68
```{=html}
</td>
```
```{=html}
<td>
```
6
```{=html}
</td>
```
```{=html}
<td>
```
4
```{=html}
</td>
```
```{=html}
<td>
```
41
```{=html}
</td>
```
```{=html}
<td>
```
25
```{=html}
</td>
```
```{=html}
<td>
```
22
```{=html}
</td>
```
```{=html}
<td>
```
10
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
0
```{=html}
</td>
```
```{=html}
<td>
```
6
```{=html}
</td>
```
```{=html}
<td>
```
2
```{=html}
</td>
```
```{=html}
<td>
```
48
```{=html}
</td>
```
```{=html}
<td>
```
35
```{=html}
</td>
```
```{=html}
<td>
```
22
```{=html}
</td>
```
```{=html}
<td>
```
4
```{=html}
</td>
```
```{=html}
<td>
```
8
```{=html}
</td>
```
```{=html}
<td>
```
3
```{=html}
</td>
```
```{=html}
<td>
```
7
```{=html}
</td>
```
```{=html}
<td>
```
2
```{=html}
</td>
```
```{=html}
<td>
```
8640
```{=html}
</td>
```
```{=html}
<td>
```
11
```{=html}
</td>
```
```{=html}
<td>
```
3308
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
</tbody>
```
```{=html}
</table>
```
```{=html}
<p>
```
... (2912 rows omitted)
```{=html}
</p>
```
Quesiton 1.5 Understanding data is normally our first step for data
science project. Even though it may be straightforward for some columns,
others are a bit technical. So you can refer to the explanation page
(with the
[link](https://github.com/JeffSackmann/tennis_atp/blob/master/matches_data_dictionary.txt)).
Please take a few minutes to understand the data and show how can we
calculate `p_1stIn`, `p_1stWon`, `p_2ndIn` and `p_2ndWon` in any given
match based on the csv provided? (10 points)

Hint: **double faults** count against the player's proper (or legal in
tennis terminology) second-serve cases.

``` python
#Answer_to_Question 1.5
...
```

Question 1.6 For any male player in the csv, we would like to know his
performance over the year, in particular the results about `p_1stIn`,
`p_1stWon`, `p_2ndIn` and `p_2ndWon`. Please help define a function
called `perfmance_2022`. It takes the name of the player as the only
arguments and returns an array with those four probabilitities. (10
points)

Hint: for any match listed in the file, any participating player can be
the winner or the loser of the match.

``` python
#Answer_to_Question 1.6
def performance_2022(player_name):
    ...

# An example call to your function:
performance_2022('Rafael Nadal')
```

### 2. Testing hypotheses (40 points) `<a id='q2'>`{=html}`</a>`{=html}

An area code in US is defined to be a three digit number from 200-999
inclusive. In reality, many of these area codes are not in use, but for
this question we'll simplify things and assume they all are.

Steve gets a lot of spam calls. Throughout these questions, you should
assume that the area code of Steve is 781. Steve suspects that there's a
higher chance that the spammers are using his area code (781) to trick
him into thinking it's someone from his area calling him. John thinks
that this is not the case, and that spammers are just choosing area
codes of the spam calls at random from all possible area codes
(Remember, for this question we're assuming the possible area codes are
200-999, inclusive). Steve wants to test his claim using the 50 spam
calls he received in the past month. Here's a dataset of the area codes
of the 50 spam calls he received in the past month

``` python
# Don't change this cell; just run it
spam = Table.read_table('spam.csv')
spam.show(5)
```

```{=html}
<table border="1" class="dataframe">
```
```{=html}
<thead>
```
```{=html}
<tr>
```
```{=html}
<th>
```
Area Code
```{=html}
</th>
```
```{=html}
</tr>
```
```{=html}
</thead>
```
```{=html}
<tbody>
```
```{=html}
<tr>
```
```{=html}
<td>
```
891
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
924
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
516
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
512
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
<tr>
```
```{=html}
<td>
```
328
```{=html}
</td>
```
```{=html}
</tr>
```
```{=html}
</tbody>
```
```{=html}
</table>
```
```{=html}
<p>
```
... (45 rows omitted)
```{=html}
</p>
```
Question 2.1 What is our **null hypothesis**? (5 points)

``` python
#Answer_to_Question 2.1 
null_hypothesis = ...
null_hypothesis
```

Our **alternative hypothesis** is that there's a higher chance of
getting a spam call with an area code of 781. **Suppose you decide to
use the number of times you see the area code 781 in 50 spam calls as
your test statistic.**

Question 2.2 Write a function called `simulate` that generates exactly
one simulated value of your test statistic under the null hypothesis. It
should take no arguments and simulate 50 area codes (with replacement)
under the assumption that the result of each area is sampled from the
range 200-999 inclusive with equal probability. Your function should
return the number of times you saw the 781 area code in those 50 random
spam calls. (10 points)

``` python
#Answer_to_Question 2.2
def simulate():
    ...
    
# Call your function to make sure it works
simulate()
```

Question 2.3 Generate 10,000 simulated values of the number of times you
see the area code 781 in 50 random spam calls. Assign
test_statistics_under_null to an array that stores the result of each of
these trials. (5 points)

``` python
#Answer_to_Question 2.3
test_statistics_under_null = ...
repetitions = ...

...
    
test_statistics_under_null
```

Question 2.4 Using the results from Question 2.3, generate a histogram
of the empirical distribution of the number of times you saw the area
code 781 in your simulation. NOTE: Use the provided bins when making the
histogram. (5 points)

``` python
#Answer_to_Question 2.4
bins = np.arange(0,5,1) # Use these provided bins
...
```

Question 2.5 Compute an empirical P-value for this test. (10 points)

``` python
#Answer_to_Question 2.5
# First calculate the observed value of the test statistic from the `spam` table.
observed_val = ...
p_value = ...
p_value
```

Question 2.6 Suppose you use a P-value cutoff of 1%. What do you
conclude from the hypothesis test? Why? (5 points)

``` python
#Answer_to_Question 2.6
testing_conclusion = ...
conclusion_reason = ...
testing_conclusion
conclusion_reason
```

### 3. Housing price vs fertility rate (20 points) `<a id='q3'>`{=html}`</a>`{=html}

In this question, we are going to make a brief investigation on hot
topics in Singapore. Fertility rate issue has been discussed quite a lot
since 1980s, but the situation has not been turning better. Singapore's
total fertility rate (TFR) hit a historic low of 1.05 in 2022. While
it's a complicated issue and involves quite a few evolving factors to
consider, housing seems to be one of the factors. So here we just use
simple method we have learned so far to see the correlation (if any)
between them.

With the csv files provided, we have yearly TFRs from 1960 until 2021,
the quarterly HDB index from the first quarter of 1990 to the third
quarter of 2022 and the priviate property index (landed, non-landed and
all) from the first quarter of 1975 until the fourth quarter of 2022).

``` python
# Don't change this cell; just run it
TFR_raw = Table.read_table('TFR2021.csv')
hdb = Table.read_table('hdb-index.csv')
ura = Table.read_table('private-index.csv')
```

Question 3.1. Data manipulation is an important part of data science
project. In our case, we have yearly TFRs and also quarterly housing
indices. In addition, for private housing, there are three difference
indices due the difference between landed and non-landed. To make the
situation simple, there are three assumptions: First, we use the average
of four quarters to be the housing indices for the corresponding year.
Second, we ingore landed private housing as it's a niche asset class, so
we only use non-landed residential entries. Third, as we can only
calculate if there are data available, so we only consider the maximum
shared year range in all three files. Create a table `final_raw`
consists of four columns in the special order `Year`, `TFR`,`HDB_Index`
and `Private_Index`. (10 points)

``` python
#Answer_to_Question 3.1
Year = ...
TFR = ...
HDB_Index = ...
Private_Index = ...
final_raw = ...
final_raw
```

Question 2. For the relationship between `TFR` and `HDB_Index`, what is
the correlation coeifficient, slope and intercept? In addition, please
draw the scatter plot of the data, as well as the regression line. (5
points)

``` python
#Answer_to_Question 3.2
TFR_HDB_correlation = ...
TFR_HDB_slope = ...
TFR_HDB_intercept = ...
```

Question 3. For the relationship between `TFR` and `Private_Index`, what
is the correlation coeifficient, slope and intercept? In addition,
please draw the scatter plot of the data, as well as the regression
line. (5 points)

``` python
#Answer_to_Question 3.3
TFR_URA_correlation = ...
TFR_URA_slope = ...
TFR_URA_intercept = ...

```

### Final Words (0 point) `<a id='q4'>`{=html}`</a>`{=html}

If there was any question that you thought was ambiguous and required
clarification to be answerable, please identify the question and state
your assumptions. Be warned: We only plan to consider this information
if we agree that the question was erroneous or ambiguous and we consider
your assumption reasonable. (0 point)

``` python
#Comment

```

### No more questions and Submission `<a id='q5'>`{=html}`</a>`{=html}

To submit your answer, please download your notebook as a .ipynb and
.html file and submit to Canvas. You can do so by navigating to the
toolbar at the top of this page, clicking File \> Download as ... \>
Notebook (.ipynb) or HTML (.html). Then, upload both files under
"Mid-term" in the Assignments on Canvas.
